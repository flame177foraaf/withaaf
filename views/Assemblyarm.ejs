<!DOCTYPE html>
<html>
  <head>
    <%- include ('head') %>
    <title><%= title%></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <style media="screen">
      table {
        border: 1px   solid #444444;
        border-collapse: collapse;
        margin-left: auto;
        margin-right: auto;

      }
      th, td{
        border: 1px solid #444444;
        border-collapse: collapse;
      }
      td{
        font-size: 18px;
        padding: 10px;
      }
    </style>
    <script  src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <script type="text/javascript">

    $(document).ready(function(){

      var count = 0;
      $('#try_btn3').click(function() {
        count++;
        $('#trycount').text(count)
        if($("input:checkbox[name=special]").is(":checked") == true) {
          if ($("input:checkbox[name=reinforce]").is(":checked") == true) {
            $.ajax({
              url: '/Assemblyarm/ing',
              type: 'GET',
              data: {
                assembly : $("#armname").text(),
                special : "checked",
                reinforce : "checked"
              },
              success: function(data) {
                var result_SocketANDStat = data.result_stats
                var custom1  ='<td colspan="2" value=""  name="armcustom" id="">' + data.armcustom + '</td> ' + '<td colspan="2" value=""  name="armcustom" id="">' + data.result_custom + '</td> ';
                var stats = '<td colspan="2" name="armproperty"><%- data.armstats %></td> + <td colspan="2" name="armproperty"><%-' + data.result_stats + '%></td>'
                var property = '<td colspan="2" name="armproperty"><%- data.armproperty %></td> + <td colspan="2" name="armproperty"><%-'+ data.result_property +'%></td>'

                $('#Socket').html(result_SocketANDStat);
                $('#Custom').html(custom1);
                $('#Stats').html(stats);
                $('#Property').html(property)

              }
            });
          } else {
            $.ajax({
              url: '/Assemblyarm/ing',
              type: 'GET',
              data: {
                assembly : $("#armname").text(),
                special : "checked"
              },
              success: function(data) {
                var result_SocketANDStat = data.result_stats
                var custom1  ='<td colspan="2" value=""  name="armcustom" id="">' + data.armcustom + '</td> ' + '<td colspan="2" value=""  name="armcustom" id="">' + data.result_custom + '</td> ';
                var stats = '<td colspan="2" name="armproperty"><%- data.armstats %></td> + <td colspan="2" name="armproperty"><%-' + data.result_stats + '%></td>'
                var property = '<td colspan="2" name="armproperty"><%- data.armproperty %></td> + <td colspan="2" name="armproperty"><%-' data.result_property + '%></td>'

                $('#Socket').text(result_SocketANDStat);
                $('#Custom').html(custom1);
                $('#Stats').html(stats);
                $('#Property').html(property)
              }
            });
          }
        } else {
          if ($("input:checkbox[name=reinforce]").is(":checked") == true) {
            $.ajax({
              url: '/Assemblyarm/ing',
              type: 'GET',
              data: {
                assembly : $("#armname").text(),
                reinforce : "checked"
              },
              success: function(data) {
                var result_SocketANDStat = data.result_stats
                var custom1  ='<td colspan="2" value=""  name="armcustom" id="">' + data.armcustom + '</td> ' + '<td colspan="2" value=""  name="armcustom" id="">' + data.result_custom + '</td> ';
                var stats = '<td colspan="2" name="armproperty"><%- data.armstats %></td> + <td colspan="2" name="armproperty"><%-' + data.result_stats + '%></td>'
                var property = '<td colspan="2" name="armproperty"><%- data.armproperty %></td> + <td colspan="2" name="armproperty"><%-' data.result_property '%></td>'

                $('#Socket').text(result_SocketANDStat);
                $('#Custom').html(custom1);
                $('#Stats').html(stats);
                $('#Property').html(property)
              }
            });
          } else {
            $.ajax({
              url: '/Assemblyarm/ing',
              type: 'GET',
              data: {
                assembly : $("#armname").text(),
              },
              success: function(data) {
                var result_SocketANDStat = data.result_stats
                var custom1  ='<td colspan="2" value=""  name="armcustom" id="">' + data.armcustom + '</td> ' + '<td colspan="2" value=""  name="armcustom" id="">' + data.result_custom + '</td> ';
                var stats = '<td colspan="2" name="armproperty"><%- data.armstats %></td> + <td colspan="2" name="armproperty"><%-' + data.result_stats + '%></td>'
                var property = '<td colspan="2" name="armproperty"><%- data.armproperty %></td> + <td colspan="2" name="armproperty"><%-' data.result_property '%></td>'

                $('#Socket').text(result_SocketANDStat);
                $('#Custom').html(custom1);
                $('#Stats').html(stats);
                $('#Property').html(property)
              }
            });
          }
        }
      });
    });

    </script>
  </head>
  <body style="">
    <h1 style="text-align:center"><%= title %></h1>
    <table id="" style="width:70%;">
      <thead>
        <colgroup>
          <col span="" id ="" style="width:40%">
          <col span="" id ="" style="width:10%">
          <col span="" id ="" style="width:10% ">
          <col span="" id ="" style="width:40% ">
        </colgroup>
      </thead>


      <tbody>
        <% if (typeof(data) === "undefined"){ %>
          <tr style="text-align:center">
            <td colspan="4">
              해당하는 자료가 없습니다. 검색을 확인한 후 다시 시도해 주세요.
            </td>
          </tr>
        <% } else { %>
          <tr style="text-align:center">
            <td colspan="" value="<%= data.armname %>" name="" id="armname"><%- data.armname %></td>
            <td name="armlimit"><%- data.armlimit %></td>
            <td name="armether"><%- data.armether %></td>
            <td value=""  name="" id="Socket" style=""><%- data.armsocket %></td>

          </tr>
          <tr style="text-align:center" id="Stats">
            <td colspan="4" name="armproperty"><%- data.armstats %></td>

          </tr>
          <tr id="Property" style="text-align:center">
            <td colspan="4" name="armproperty"><%- data.armproperty %></td>

          </tr>
          <tr>
            <td colspan="4" name="armfeat"><%- data.armfeat %></td>
          </tr>
          <tr id="Custom" style="height:300px">
            <td colspan="4" value=""  name="armcustom" id=""><%- data.armcustom%></td>
          </tr>
        <% } %>

      </tbody>
    </table>
    <% if (typeof(data) === "undefined"){ %>


      <div class="" style="text-align: center">
        <input style="margin: 5px; width:100px;  height:  50px; line-height:25px;" onclick="history.back(-1);" type="button" name="" value="뒤로" />
      </div>
    <% } else { %>

      <p style="text-align:center">
        현재 재조립을 <span id ='trycount' > 0</span> 회 시도하였습니다.
      </p>

      <div class="" style="text-align:center; margin: 20px;">
        <span style="font-size:14px">특급</span>
        <input type="checkbox" name="special" id="cb1">
        <label for="cb1" style=""></label>

        <span style="font-size:14px">+ 5 강화</span>
        <input type="checkbox" name="reinforce" id="cb2">
        <label for="cb2"</label>
      </div>


    <div class="" style="text-align: center">
      <button type="button" id="try_btn3" name="button" style="height:50px">재조립</button>
    </div>
    <div class="" style="text-align: center">
      <input style="margin: 5px; width:100px;  height:  50px; line-height:25px;" onclick="history.back(-1);" type="button" name="" value="뒤로" />
    </div>
    <% } %>
  </body>
  <footer>
    <%- include ('footer')%>
  </footer>

</html>
