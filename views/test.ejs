<!DOCTYPE html>
<html>
  <head>
    <%- include ('head') %>
    <title><%= title%></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <style media="screen">
      table {
        border: 1px   solid #444444;
        border-collapse: collapse;
        margin-left: auto;
        margin-right: auto;

      }
      th, td{
        border: 1px solid #444444;
        border-collapse: collapse;
      }
      td{
        font-size: 18px;
        padding: 10px;
      }
    </style>
    <script  src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <script type="text/javascript">

    $(document).ready(function(){

      var count = 0;
      $('#try_btn3').click(function() {
        count++;
        $('#trycount').text(count)
        $.ajax({
          url: '/test/ing',
          type: 'GET',
          data: {
            assembly : $("#wpname").text()
          },
          success: function(data) {
            var result_SocketANDStat = '<td value="socket"  name="wpsocket" id="" style="font-size:30px">' + data.result_socket+ '</td>' +'<td colspan="3" value=""  name="" id=""> ' + data.result_stats + '</td>'
            var custom1  ='<td colspan="2" value=""  name="wpcustom" id="">' + data.wpcustom + '</td> ' + '<td colspan="2" value=""  name="wpcustom" id="">' + data.result_custom + '</td> ';
            $('#SocketANDStat').html(result_SocketANDStat);
            $('#Custom').html(custom1);
          }
        });
      });
      $($'').click(function () {

      })
    });

    </script>
  </head>
  <body style="">
    <h1 style="text-align:center"><%= title %></h1>
    <table id="" style="width:70%;">
      <thead>
        <colgroup>
          <col span="" id ="" style="width:40%">
          <col span="" id ="" style="width:10%">
          <col span="" id ="" style="width:10% ">
          <col span="" id ="" style="width:40% ">
        </colgroup>
      </thead>


      <tbody>
        <tr style="text-align:center">
          <td colspan="" value="<%= data.wpname %>" name="" id="wpname"><%- data.wpname %></td>
          <td name="wplimit"><%- data.wplimit %></td>
          <td name="wpether"><%- data.wpether %></td>
          <td name="wpproperty"><%- data.wpproperty %></td>
        </tr>
        <tr style="text-align:center" id="SocketANDStat">
          <td value=""  name="" id="" style=""><%- data.wpsocket %></td>
          <td colspan="3" value=""  name="" id=""><%- data.wpstats %></td>
        </tr>
        <tr>
          <td colspan="4" name="wpfeat"><%- data.wpfeat %></td>
        </tr>
        <tr id="Custom" style="height:300px">
          <td colspan="4" value=""  name="wpcustom" id=""><%- data.wpcustom%></td>
        </tr>
      </tbody>
    </table>



      <p style="text-align:center">
        현재 재조립을 <span id ='trycount' > 0</span> 회 시도하였습니다.
      </p><!DOCTYPE html>
      <html>
        <head>
          <%- include ('head') %>
          <title><%= title%></title>
          <link rel='stylesheet' href='/stylesheets/style.css' />

          <style media="screen">
          </style>
          <script type="text/javascript">
            function checkonclick() {
              if (document.add.datalistname.value == "" || document.add.title.value == null || document.add.datalistname.value == undefined || ( document.add.datalistname.value != null && typeof document.add.datalistname.value == "object" && !Object.keys(document.add.datalistname.value).length ) ) {
                alert("내용을 입력해주세요!");
                document.add.datalistname.focus();
                return false;
              }
              return true;
            }
          </script>
        </head>
        <body style="">
          <div class="title_div" >
            <h1><%= title %></h1>

          </div>
          <div class="" id="seach_form_id" >

            <form action="/aafwp/1" method="get">
              <input type="text" placeholder="모든 항목" name="searchText" style="width:200px">
              <select name="searchType">
                  <option value="name">이름</option>
                  <option value="property">속성</option>
                  <option value="feat">피트</option>
                  <option value="custom">커스텀</option>
              </select>
              <input type="checkbox" name="limit" value="300" id="chbox"> <label for="chbox" style="">300레벨 이상</label>
              <input action="/aafwp/1" type="submit" class="btn" value="찾기" ></button>
            </form>
          </div>
          <div class="">
            <table id="eqtable" style="width:100%;">
              <colgroup>
                <col width="100">
                <col width="200">
                <col width="50">
                <col width="50">
                <col width="100">
                <col width="200">
                <col width="350">
                <col width="300">
                <col width="650">
              </colgroup>
              <thead>
                <tr  style='text-align: center'>
                  <th>등급</th>
                  <th>이름</th>
                  <th>제한</th>
                  <th>소켓</th>
                  <th>에테르</th>
                  <th>성능</th>
                  <th>속성</th>
                  <th>피트</th>
                  <th>커스텀</th>
                </tr>
              </thead>
              <%# tbody에 잇는 스타일은 '\n ' 줄바꿈을 표현함 %>
              <tbody>
                <% if(typeof(CurrentPage) === 'undefined'){ %>
                  <tr>
                    <td colspan="9"; style= "text-align:center;"> 검색이 필요합니다.</td>
                  </tr>
                <% } else { %>
                  <% data.forEach(function(item) { %>
                  <tr  style="white-space: pre-line; font-size:12px;">
                    <td><%- item.wpgrade %></td>
                    <td><%- item.wpname %></td>
                    <td style='text-align: center'><%- item.wplimit %></td>
                    <td style='text-align: center'><%- item.wpsocket %></td>
                    <td style='text-align: center'><%- item.wpether %></td>
                    <td style='text-align: center'><%- item.wpstats %></td>
                    <td><%- item.wpproperty %></td>
                    <td><%- item.wpfeat %></td>
                    <td><%- item.wpcustom %></td>
                  </tr>
                  <% }); %>
                <% } %>
              <div class="" id="pagelist">
                <% if(typeof(CurrentPage) === 'undefined'){ %>
                  <tr>
                    <div class="" id="pagelist" >
                      <td colspan="9" style= "text-align:center; font-size:24px">
                        검색이 필요합니다.
                      </td>
                    </div>
                  </tr>
                <% } else { %>
                  <tr>
                    <div class="" id="pagelist">
                      <td colspan="21" style= "text-align:center; font-size:24px">
                        <% if (CurrentPage > PageSize){ %>
                          <a href="/aafwp/1?searchText=<%-Search %>&searchType=<%- SearchType %>&limit=<%- SearchLimit %>"> ◀◀ </a>
                          <a href="/aafwp/<%- StartPage-1 %>?searchText=<%- Search %>&searchType=<%- SearchType %>&limit=<%- SearchLimit %>"> ◀ </a>
                        <% } %>
                        <% for (var iCount = StartPage; iCount <= EndPage; iCount++ ){ %>
                          <% if (iCount == CurrentPage) { %>
                            <b class="btnnonactive"><%- iCount %></b>
                          <% } else { %>
                            <a href="/aafwp/<%- iCount %>?searchText=<%- Search %>&searchType=<%- SearchType %>&limit=<%- SearchLimit %>" class="btnactive"><%- iCount %></a>
                          <% } %>
                        <% } %>
                        <% if (EndPage < TotalPage){ %>
                          <a href="/aafwp/<%- EndPage+1 %>?searchText=<%- Search %>&searchType=<%- SearchType %>&limit=<%- SearchLimit %>">  ▶ </a>
                          <a href="/aafwp/<%- TotalPage %>?searchText=<%- Search %>&searchType=<%- SearchType %>&limit=<%- SearchLimit %>"> ▶▶ </a>
                        <% } %>
                      </td>
                    </div>
                  </tr>
                <% } %>
              </div>
              </tbody>
            </table>
          </div>

          <% if(typeof(CurrentPage) === 'undefined'){ %>
            <div class="" style="text-align: center">
              <div class="">
                <form class="" action="/wpadd" method="post">
                   <button onclick=location.href="/aafwp/wpadd" type="button" name="button" style="width:200px">신규등록</a></button>
                </form>
              </div>
            </div>


          <% } else { %>


          <div class="" style="text-align: center">
            <div class="">
              <form class="" action="/wpadd" method="post">
                 <button onclick=location.href="/aafwp/wpadd" type="button" name="button" style="width:200px">신규등록</a></button>
              </form>
            </div>

            <form class="" name="add" action="/fixwp" method="get"  onsubmit="return checkonclick()">
              <input type=text list=browsers style="" checked value="<%= data[0].wpname %>" name="Seachname">
              <%# 밸류값을 %=title 과 같이 해주면 받아오는 title 값에 따라 value 값이 달라지게 된다. %>
                <datalist id="browsers" name="datalistname" class="" style="width:50%">
                  <% data.forEach(function(item) { %>
                  <option value='<%= item.wpname%>' style=""><%- item.wpname%></option>
                  <% }); %>
                </datalist>
              <input action="/fixwp" type="submit" class="btn" value="변경하기" ></button>
            </form>
            <form class="" name="" action="/Assemblywp" method="get"  onsubmit="return checkonclick()">
              <input type=text list=browsers style="" checked value="<%= data[0].wpname %>" name="assembly">
              <%# 밸류값을 %=title 과 같이 해주면 받아오는 title 값에 따라 value 값이 달라지게 된다. %>
                <datalist id="browsers" name="datalistname" class="" style="width:50%">
                  <% data.forEach(function(item) { %>
                  <option value='<%= item.wpname%>' style=""><%- item.wpname%></option>
                  <% }); %>
                </datalist>
              <input action="/" type="submit" class="btn" value="재조립하기" ></button>
            </form>
          </div>
          <% } %>
        </body>
        <footer>
          <%- include ('footer')%>
        </footer>
      </html>



    <div class="" style="text-align: center">
      <button type="button" id="try_btn3" name="button" style="height:50px">재조립</button>
    </div>
    <div class="" style="text-align: center">
      <input style="" onclick="history.back(-1);" type="button" name="" value="뒤로" /button>
    </div>
  </body>
  <footer>
    <%- include ('footer')%>
  </footer>

</html>
