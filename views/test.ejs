<!DOCTYPE html>
<html>
  <head>
    <%- include ('head') %>
    <title><%= title%></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />

    <style media="screen">

      a {
        font-family:"돋움";
        text-decoration: none;
      }
      ul { margin: 0;  padding: 0; }

      a:link { color: blue; text-decoration: none; }

      a:visited { color: purple; text-decoration: none; }

      a:hover { color: red; text-decoration: underline; }

      a:active { color: white; background-color: silver; }
      textarea {
        border-radius :5px;
      }
      button {
        width: 100px;
        height:34px;
        font-size: 16px;
        padding: 0px;
        border-radius :5px;
      }
      #comment_submit {
        width: 80px;
        height:30px;
        font-size: 16px;
        padding: 0px;
        border-radius :5px;
      }
      #seach_form_id {
        text-align:center;
        margin:5px;
      }
      #seach_form_id2 {
        text-align:center;
        margin:5px;
      }
      #btnactive {
        padding-top: 2px;
        padding-right: 8px;
        padding-bottom: 2px;
        padding-left: 8px;
        border: 1px solid #ececec;
        color: #5795dd;
        background-color: #fff;
      }
      #btnnonactive {
        padding: 3px 9px;
        margin: 0 1px 0 2px;
        font: bold 12px/19px tahoma;
        color: #666;
        cursor: pointer;
        text-decoration: none;
      }

      #eqtable {
        border-top: 3px solid #036;
        border-collapse: collapse;
        text-align: left;
        line-height: 1.5;
        }
      #eqtable th {
        padding: 5px;
        font-weight: bold;
        vertical-align: center;
        text-align: center;
        color: #369;
        border-bottom: 3px solid #036;
      }
      #eqtable td {
        padding: 3px;
        vertical-align: center;
        border-bottom: 1px solid #ccc;
      }

      #mon_table {
        border-top: 3px solid #036;
        border-collapse: collapse;
        text-align: center;
        line-height: 1.5;
        }
      #mon_table th {
        padding: 5px;
        font-weight: bold;
        color: #369;

        border-bottom: 3px solid #036;
      }
      #mon_table td {
        padding: 3px;
        border-bottom: 1px solid #ccc;
      }
      #pagelist{
        list-style-type: none;
        float: left;
        text-align: center;
      }
      input[id="chbox"] + label {
        display: inline-block;
        height: 20px;
        border: 2px solid #bcbcbc;
        cursor: pointer;
        font-size: 15px
      }

      input[id="chbox"]:checked + label {
        background-color: #666666;
      }
      input[id="chbox"] {
        display: none;
      }

      input{
        width: 100px;
        height:30px;
        font-size: 16px;
        padding: 0px;
        border-radius :5px;

      }
      select{
        width: auto;

        height:32px;
        font-size: 16px;
        padding: 0px;

      }
      .title_div {
        text-align:center
      }
    body {
      margin-top: 25px;
      margin-left: 5%;
      margin-right: 5%;

      font: 14px "Lucida Grande", Helvetica, Arial, sans-serif;
    }
    body .h1{
      padding-top: 25px;
    }
    a {
      color: #00B7FF;
    }

    </style>
    <script type="text/javascript">
      function checkonclick() {
        if (document.add.datalistname.value == "" || document.add.title.value == null || document.add.datalistname.value == undefined || ( document.add.datalistname.value != null && typeof document.add.datalistname.value == "object" && !Object.keys(document.add.datalistname.value).length ) ) {
          alert("내용을 입력해주세요!");
          document.add.datalistname.focus();
          return false;
        }
        return true;
      }
    </script>

    <script  src="https://code.jquery.com/jquery-3.5.1.min.js">    </script>
    <script type="text/javascript">

      $(document).on("click","input[name=findadd]",function(){

        var addStaffText =
        '<div class="" id="seach_form_id2" name="seach_form_id2">'
        +'<input type="text" placeholder="모든 항목" name="searchText2" style="width:200px">'
        + '<select name="searchType2">'
        +    '<option value="wpproperty">속성</option>'
        +    '<option value="wpfeat">피트</option>'
        +    '<option value="wpcustom">커스텀</option>'
        +'</select>'
        +'<button class="btn btn-default" name="delStaff">삭제</button>'
        +'</div>'

        var aaa = $( "div[name=seach_form_id2]:last" ); //last를 사용하여 trStaff라는 명을 가진 마지막 태그 호출
          aaa.after(addStaffText); //마지막 trStaff명 뒤에 붙인다.
        });

        //삭제 버튼
        $(document).on("click","button[name=delStaff]",function(){

            var aaa = $(this).parent();

            aaa.remove(); //tr 테그 삭제
        });
    </script>
  </head>
  <body style="">
    <div class="title_div" >
      <h1><%= title %></h1>

    </div>
    <div class="">
      <form action="/aafwp/1" method="get">
        <div class="" id="seach_form_id" name="seach_form_id">

          <input type="text" placeholder="모든 항목" name="searchText" style="width:200px">
          <select name="searchType">
              <option value="wpname">이름</option>
              <option value="wpproperty">속성</option>
              <option value="wpfeat">피트</option>
              <option value="wpcustom">커스텀</option>
          </select>
          <input action="" type="submit" class="btn" value="찾기" ></button>
          <input type="button" name="findadd" class="btnAdd" value="Add">
        </div>
        <div class="" id="" name="seach_form_id2">

        </div>

      </form>
    </div>

    <div class="">
      <table id="eqtable" style="width:100%;">
        <colgroup>
          <col width="100">
          <col width="200">
          <col width="50">
          <col width="50">
          <col width="100">
          <col width="200">
          <col width="350">
          <col width="300">
          <col width="650">
          <col width="300">

        </colgroup>
        <thead>
          <tr  style='text-align: center'>
            <th>등급</th>
            <th>이름</th>
            <th>제한</th>
            <th>소켓</th>
            <th>에테르</th>
            <th>성능</th>
            <th>속성</th>
            <th>피트</th>
            <th>커스텀</th>
            <th></th>
          </tr>
        </thead>
        <%# tbody에 잇는 스타일은 '\n ' 줄바꿈을 표현함 %>
        <tbody>
          <% if(typeof(CurrentPage) === 'undefined'){ %>
            <tr>
              <td colspan="10"; style= "text-align:center;"> 검색이 필요합니다.</td>
            </tr>
          <% } else if (typeof(data[0]) === 'undefined'){ %>
            <tr>
              <div class="" id="pagelist" >
                <td colspan="10" style= "text-align:center; font-size:24px">
                  해당하는 데이터가 없습니다.
                </td>
              </div>
            </tr>
          <% } else { %>
            <% data.forEach(function(item) { %>
              <% if (item.wpproperty.indexOf('/') != -1){ %>
                <% var WpP = item.wpproperty.split('/') %>
                <% if ( WpP[1] == ' 불 ') { %>
                  <tr class="" id="tabletr" style="white-space: pre-line; font-size:12px; background-color:#FFD5DD">
                <% } else if (WpP[1] == ' 물 ' ) { %>
                  <tr class="" id="tabletr" style="white-space: pre-line; font-size:12px; background-color:#DBE0FC">
                <% } else if (WpP[1] == ' 바람 ') { %>
                  <tr class="" id="tabletr" style="white-space: pre-line; font-size:12px; background-color:#CEFFD3">
                <% } else if (WpP[1] == ' 땅 ') { %>
                  <tr class="" id="tabletr" style="white-space: pre-line; font-size:12px; background-color:#F8EAD8">
                <% } else if (WpP[1] == ' 정신 ') { %>
                  <tr class="" id="tabletr" style="white-space: pre-line; font-size:12px; background-color:#FFFFDB">
                <% } else if (WpP[1] == ' 아스트랄 ') { %>
                  <tr class="" id="tabletr" style="white-space: pre-line; font-size:12px; background-color:#E4C1F2">
                <% } else if (WpP[1] == ' 무속성 ') { %>
                  <tr class="" id="tabletr" style="white-space: pre-line; font-size:12px; background-color:#EAEAEA">
                <% } else { %>
                  <tr class="" id="tabletr" style="white-space: pre-line; font-size:12px;">
                <% } %>
              <% } else { %>
                <tr class="" id="tabletr" style="white-space: pre-line; font-size:12px;">
              <% } %>
              <td><%- item.wpgrade %></td>
              <td><%- item.wpname %></td>
              <td style='text-align: center'><%- item.wplimit %></td>
              <td style='text-align: center'><%- item.wpsocket %></td>
              <td style='text-align: center'><%- item.wpether %></td>
              <td style='text-align: center'><%- item.wpstats %></td>
              <td style='text-align: center'><%- item.wpproperty %></td>
              <td><%- item.wpfeat %></td>
              <td><%- item.wpcustom %></td>
              <td style="white-space: normal;">
                <div class="" style="float:left;">
                  <form action="/aafwp/fixwp?Seachname=<%= data[0].wpname %>" method="get ">
                    <input style="width:60px; " type="submit" value="변경" />
                </div>

                <div class="" style="float:left;">

                  <form action="/Assemblywp?assembly=<%= data[0].wpname %>" method="get">
                    <input style="width:60px " type="submit" value="재조립" />
                  </form>
                </div>

              </td>


            </tr>
            <% }); %>
          <% } %>
        <div class="" id="pagelist">
          <% if(typeof(CurrentPage) === 'undefined'){ %>
            <tr>
              <div class="" id="pagelist" >
                <td colspan="10" style= "text-align:center; font-size:24px">
                  검색이 필요합니다.
                </td>
              </div>
            </tr>

          <% } else { %>
            <tr>
              <div class="" id="pagelist">
                <td colspan="21" style= "text-align:center; font-size:24px">
                  <% function FuncPageurl(pagenumber) { %>
                    <% var pageurl = "/aafwp/" + pagenumber + "?searchText=" + Search + "&searchType=" +  SearchType %>
                    <% if (Searchcount !== 'undefined') { %>
                      <% for (var i = 0; i < Searchcount; i++) { %>
                        <% pageurl = pageurl + "&searchText2=" + Search22[i]  + "&searchType2=" +  SearchType22[i] %>
                      <% } %>
                    <% } %>
                    <% return pageurl %>
                  <% } %>
                  <% if (CurrentPage > PageSize){ %>
                    <% Search= Search.replace(/&/g,"%26").replace(/\+/g,"%2B"); %>
                    <a href=" <%- FuncPageurl(1) %>" id="MoveFirstpage"> ◀◀ </a>
                    <a href=" <%- FuncPageurl(StartPage-1) %>" onclick="" id="MovePrepage"> ◀ </a>
                  <% } %>
                  <% for (var iCount = StartPage; iCount <= EndPage; iCount++ ){ %>
                    <% if (iCount == CurrentPage) { %>
                      <b class="btnnonactive"><%- iCount %></b>
                    <% } else { %>
                      <% Search= Search.replace(/&/g,"%26").replace(/\+/g,"%2B"); %>
                      <a href=" <%- FuncPageurl(iCount) %>" class="btnactive" id="MoveNumpage"><%- iCount %></a>
                    <% } %>
                  <% } %>
                  <% if (EndPage < TotalPage){ %>
                    <% Search= Search.replace(/&/g,"%26").replace(/\+/g,"%2B"); %>
                    <a href=" <%- FuncPageurl(EndPage+1) %>" onclick="" id="MoveNextpage">  ▶ </a>
                    <a href=" <%- FuncPageurl(TotalPage) %>" onclick="" id="MoveEndpage"> ▶▶ </a>
                  <% } %>
                </td>
              </div>
            </tr>
          <% } %>
        </div>
        </tbody>
      </table>
    </div>

      <div class="" style="text-align: center">
        <div class="">
          <form class="" action="/addwp" method="get">
             <button onclick=location.href="/aafwp/addwp" type="button" name="button" style="width:200px">신규등록</a></button>
          </form>
        </div>
      </div>

    <% } %>
  </body>
  <footer>
    <%- include ('footer')%>
  </footer>
</html>
